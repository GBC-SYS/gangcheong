<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="강남중앙침례교회 청년부 수련회 사랑의 언어 도장판"
    />

    <!-- Open Graph / 카카오톡 공유 -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://gbc-sys.github.io/gangcheong/mission/"
    />
    <meta property="og:title" content="LOVE in Action - 사랑의 언어 도장판" />
    <meta
      property="og:description"
      content="5가지 사랑의 언어로 사랑을 실천해요!"
    />
    <meta
      property="og:image"
      content="https://gbc-sys.github.io/gangcheong/mission/assets/images/seo.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="강남중앙침례교회 청년부" />
    <meta property="og:locale" content="ko_KR" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="LOVE in Action - 사랑의 언어 도장판" />
    <meta
      name="twitter:description"
      content="5가지 사랑의 언어로 사랑을 실천해요!"
    />
    <meta
      name="twitter:image"
      content="https://gbc-sys.github.io/gangcheong/mission/assets/images/seo.png"
    />

    <title>강청 | 사랑의 언어 도장판</title>

    <!-- Styles -->
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- 인트로 화면 -->
    <div id="intro" class="intro">
      <div class="intro__card">
        <div class="intro__icon">
          <img src="assets/images/logo.jpg" alt="로고" />
        </div>
        <h1 class="intro__title">2026 강청 겨울 수련회</h1>
        <p class="intro__subtitle">LOVE in Action - 사랑의 언어 도장판</p>

        <div class="intro__form">
          <label class="intro__label">당신의 이름은?</label>
          <input
            type="text"
            id="userName"
            class="intro__input"
            placeholder="홍길동"
          />
        </div>

        <button id="startBtn" class="intro__btn">
          시작하기
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
    </div>

    <!-- 메인 앱 -->
    <div id="app" class="app" style="display: none">
      <!-- 헤더 (Header 컴포넌트로 렌더링) -->
      <header id="header" class="header"></header>

      <!-- 메인 콘텐츠 -->
      <main class="main">
        <!-- 시작 전 안내 -->
        <div id="beforeStartNotice" class="night-notice" style="display: none">
          <div class="night-notice__icon">🙏</div>
          <h2 class="night-notice__title">아직 미션 시작 전이에요!</h2>
          <p class="night-notice__desc">
            수련회 당일부터 미션이 시작됩니다.<br />
            조금만 기다려주세요!
          </p>
        </div>

        <!-- 미션 기간 종료 안내 -->
        <div id="missionEndedNotice" class="night-notice" style="display: none">
          <div class="night-notice__icon">🎉</div>
          <h2 class="night-notice__title">미션 기간이 끝났습니다</h2>
          <p class="night-notice__desc">
            사랑의 언어 미션에 참여해주셔서 감사합니다!<br />
            함께한 시간이 복된 추억이 되길 바랍니다.
          </p>
        </div>

        <!-- 도장판 섹션 -->
        <div id="stampSection" class="stamp-section">
          <p class="stamp-section__desc">
            5가지 사랑의 언어로 주변 사람들에게 사랑을 표현해보세요!<br />
            각 언어별로 대상자를 정하고, 미션을 선택한 뒤 완료하면 도장을
            받아요.
          </p>
          <div id="stampContainer" class="stamp-container">
            <!-- 도장판 카드들이 동적으로 추가됩니다 -->
          </div>
        </div>

      </main>

      <!-- 하단 고정 공유 버튼 -->
      <div class="floating-share-wrapper">
        <button id="floatingShareBtn" class="floating-share-btn" disabled>
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
          </svg>
          <span>공유하기</span>
        </button>
        <div class="floating-share-tooltip">
          1개 이상 도장을 모으면 공유할 수 있어요!
        </div>
      </div>

      <!-- SVG 그라데이션 정의 -->
      <svg width="0" height="0" style="position: absolute">
        <defs>
          <linearGradient id="navGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#e91e63" />
            <stop offset="50%" stop-color="#ff5722" />
            <stop offset="100%" stop-color="#ff9800" />
          </linearGradient>
        </defs>
      </svg>

      <!-- 하단 네비게이션 -->
      <nav class="bottom-nav">
        <button
          class="bottom-nav__btn bottom-nav__btn--active"
          data-tab="stamp"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9 12l2 2 4-4"></path>
          </svg>
          <span>도장판</span>
        </button>
        <a href="page/timetable.html" class="bottom-nav__btn" data-tab="timetable">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <span>타임테이블</span>
        </a>
        <button class="bottom-nav__btn" data-tab="testimony">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="2"
          >
            <path
              d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
            ></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
          </svg>
          <span>간증문</span>
        </button>
        <button class="bottom-nav__btn" data-tab="survey">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="2"
          >
            <path
              d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
            ></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="12" y1="18" x2="12" y2="12"></line>
            <line x1="9" y1="15" x2="15" y2="15"></line>
          </svg>
          <span>설문</span>
        </button>
      </nav>
    </div>

    <!-- 미션 선택 모달 -->
    <div id="missionModal" class="modal" style="display: none">
      <div class="modal__backdrop"></div>
      <div class="modal__content">
        <div class="modal__header">
          <h3 class="modal__title" id="modalTitle">미션 선택</h3>
          <button class="modal__close" id="modalClose">&times;</button>
        </div>
        <div class="modal__body">
          <div class="modal__target">
            <label class="modal__label">누구에게 사랑을 표현할까요?</label>
            <input
              type="text"
              id="targetName"
              class="modal__input"
              placeholder="대상자 이름"
            />
          </div>
          <div class="modal__missions">
            <label class="modal__label">어떤 미션을 수행할까요?</label>
            <div id="missionOptions" class="modal__options">
              <!-- 미션 옵션들이 동적으로 추가됩니다 -->
            </div>
          </div>
        </div>
        <div class="modal__footer">
          <button class="btn btn-secondary" id="modalCancel">취소</button>
          <button class="btn btn-primary" id="modalConfirm">확인</button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      // 로컬스토리지 버전 관리 - 버전 변경 시 특정 데이터 초기화
      (function () {
        const STORAGE_VERSION = "1";
        const savedVersion = localStorage.getItem("storage_version");

        if (savedVersion !== STORAGE_VERSION) {
          // 초기화할 키 목록
          const keysToRemove = [
            "stamp_data",
            "last_share_date",
            "userName",
            "last_confetti_day1",
            "last_confetti_day2",
          ];

          keysToRemove.forEach((key) => localStorage.removeItem(key));
          localStorage.setItem("storage_version", STORAGE_VERSION);
          console.log(
            "로컬스토리지 데이터가 초기화되었습니다. (v" +
              STORAGE_VERSION +
              ")",
          );
        }
      })();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script src="js/components/Header.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
