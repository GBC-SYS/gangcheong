<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta
      name="description"
      content="강남중앙침례교회 청년부 수련회 사랑의 언어 도장판"
    />

    <!-- Open Graph / 카카오톡 공유 -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://gbc-sys.github.io/gangcheong/mission/"
    />
    <meta property="og:title" content="LOVE in Action - 사랑의 언어 도장판" />
    <meta
      property="og:description"
      content="5가지 사랑의 언어로 사랑을 실천해요!"
    />
    <meta
      property="og:image"
      content="https://gbc-sys.github.io/gangcheong/mission/assets/images/seo.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="강남중앙침례교회 청년부" />
    <meta property="og:locale" content="ko_KR" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="LOVE in Action - 사랑의 언어 도장판" />
    <meta
      name="twitter:description"
      content="5가지 사랑의 언어로 사랑을 실천해요!"
    />
    <meta
      name="twitter:image"
      content="https://gbc-sys.github.io/gangcheong/mission/assets/images/seo.png"
    />

    <title>강청 | 사랑의 언어 도장판</title>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-GLP4PQYH4P"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-GLP4PQYH4P");
    </script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- 스플래시 화면 -->
    <div id="splash" class="splash">
      <div class="splash__content">
        <div class="splash__logo">
          <img src="assets/images/logo.jpg" alt="로고" />
        </div>
        <div class="splash__text">
          <h1 class="splash__title">LOVE in Action</h1>
          <p class="splash__subtitle">사랑의 언어 도장판</p>
        </div>
        <div class="splash__loader">
          <div class="splash__loader-bar"></div>
        </div>
      </div>
      <p class="splash__footer">강남중앙침례교회 청년부</p>
    </div>

    <!-- 인트로 화면 -->
    <div id="intro" class="intro">
      <div class="intro__card">
        <div class="intro__icon">
          <img src="assets/images/logo.jpg" alt="로고" />
        </div>
        <h1 class="intro__title">2026 강청 겨울 수련회</h1>
        <p class="intro__subtitle">LOVE in Action - 사랑의 언어 도장판</p>

        <div class="intro__form">
          <label class="intro__label">당신의 이름은?</label>
          <input
            type="text"
            id="userName"
            class="intro__input"
            placeholder="홍길동"
          />
        </div>

        <button id="startBtn" class="intro__btn">
          시작하기
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      // 로컬스토리지 스키마 버전 관리
      (function () {
        const SCHEMA_VERSION = 1;
        const SCHEMA_KEY = "app_schema_version";

        const migrations = {
          1: {
            keysToRemove: [
              "stamp_data",
              "last_share_date",
              "userName",
              "splash_shown",
            ],
          },
          2: {
            keysToRemove: ["last_confetti_day1", "last_confetti_day2"],
          },
          99: { clearAll: true },
        };

        const savedVersion = parseInt(localStorage.getItem(SCHEMA_KEY)) || 0;

        if (savedVersion < SCHEMA_VERSION) {
          for (let v = savedVersion + 1; v <= SCHEMA_VERSION; v++) {
            const migration = migrations[v];
            if (migration?.clearAll) {
              localStorage.clear();
            } else if (migration?.keysToRemove) {
              migration.keysToRemove.forEach((key) =>
                localStorage.removeItem(key),
              );
            }
          }

          localStorage.setItem(SCHEMA_KEY, SCHEMA_VERSION);
          console.log(
            `[Storage] 마이그레이션 완료: v${savedVersion} → v${SCHEMA_VERSION}`,
          );
        }
      })();
    </script>
    <script src="js/utils/url.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
